import{__awaiter as e}from"../../../../../node_modules/.pnpm/@rollup_plugin-typescript@11.1.6_rollup@4.24.4_tslib@2.6.3_typescript@4.9.5/node_modules/tslib/tslib.es6.js";import{callFunctionInHostAndHandleResponse as t}from"../../internal/communication.js";import{registerHandlerHelper as n}from"../../internal/handlers.js";import{ensureInitialized as o}from"../../internal/internalAPIs.js";import{ResponseHandler as r}from"../../internal/responseHandler.js";import{getApiVersionTag as i}from"../../internal/telemetry.js";import{FrameContexts as s}from"../../public/constants.js";import{isSdkError as l}from"../../public/interfaces.js";import{runtime as c}from"../../public/runtime.js";import{SidePanelErrorCode as p,SidePanelErrorImpl as u}from"./sidePanelInterfaces.js";const a="v2";function d(){var e;return o(c)&&!!(null===(e=c.supports.copilot)||void 0===e?void 0:e.sidePanel)}function m(e){if("object"!=typeof e||null===e)return!1;const t=e;return Object.values(p).includes(t.errorCode)&&(void 0===t.message||"string"==typeof t.message)||l(e)}function f(n){return e(this,void 0,void 0,(function*(){o(c);const e=n?[new C(n)]:[];return t("copilot.sidePanel.getContent",e,new b,i(a,"copilot.sidePanel.getContent"),m)}))}function j(){return e(this,void 0,void 0,(function*(){return o(c),t("copilot.sidePanel.preCheckUserConsent",[],new h,i(a,"copilot.sidePanel.preCheckUserConsent"),m)}))}function v(e){n(i(a,"copilot.sidePanel.registerUserActionContentSelect"),"copilot.sidePanel.userActionContentSelect",e,[s.content],(()=>{if(!d())throw P}))}const P=new u(p.NotSupportedOnPlatform,"This API is not supported on the current platform.");class b extends r{validate(e){return null!==e&&"object"==typeof e}deserialize(e){return e}}class h extends r{validate(e){return null!==e&&"object"==typeof e}deserialize(e){return e}}class C{constructor(e){this.contentRequest=e}serialize(){return this.contentRequest}}export{P as copilotSidePanelNotSupportedOnPlatformError,f as getContent,m as isResponseAReportableError,d as isSupported,j as preCheckUserConsent,v as registerUserActionContentSelect};
